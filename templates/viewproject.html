<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Welcome To Modelkb</title>

    <!-- Bootstrap core CSS-->
    <link href="{{ url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">

    <!-- Custom fonts for this template-->
    <link href="{{ url_for('static', filename='vendor/fontawesome-free/css/all.min.css') }}" rel="stylesheet" type="text/css">

    <!-- Page level plugin CSS-->
    <link href="{{ url_for('static', filename='vendor/datatables/dataTables.bootstrap4.css') }}" rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="{{ url_for('static', filename='css/sb-admin.css') }}" rel="stylesheet">

        <!-- Bootstrap core JavaScript-->
    <script src="{{ url_for('static', filename='vendor/jquery/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>

    <!-- Core plugin JavaScript-->
    <script src="{{ url_for('static', filename='vendor/jquery-easing/jquery.easing.min.js') }}"></script>

    <link rel="stylesheet" href="https://rawgit.com/wenzhixin/bootstrap-table/master/dist/bootstrap-table.min.css">

  <!-- Bootstrap Table Filter Extension CSS -->
  <link rel="stylesheet" href="https://rawgit.com/lukaskral/bootstrap-table-filter/master/src/bootstrap-table-filter.css">

  <!-- Bootstrap Table Filter Extension Javascript-->
    <script src="{{ url_for('static', filename='js/bootstrap-table.js') }}"></script>
    <script src="{{ url_for('static', filename='js/ex_bootstrap-table-filter.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap-table-filter.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bs-table.js') }}"></script>
    <script src="{{ url_for('static', filename='js/sb-admin.min.js') }}"></script>
  <script>
    var dados = "";

    function queryParam(params) {
      var q = {
        "limit": params.pageSize,
        "offset": params.pageSize * (params.pageNumber - 1),
        "search": params.searchText,
        "sort": params.sortName,
        "name": params.sortName,
        "order": params.sortOrder,
        "dados": dados

      };
      return q;
    }
  </script>
<style>
img {
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 5px;
  width: 150px;
}

img:hover {
  box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
}
</style>
</head>
<body id="page-top">
<p>Hello I'm modelkb project</p>
 <nav class="navbar navbar-expand navbar-dark bg-dark static-top">

      <a class="navbar-brand mr-1" href="./">Modelkb Viewer</a>

      <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
        <i class="fas fa-bars"></i>
      </button>
 <!-- Navbar Search -->
      <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search for..." aria-label="Search" aria-describedby="basic-addon2">
          <div class="input-group-append">
            <button class="btn btn-primary" type="button">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </form>

      <!-- Navbar -->
      <ul class="navbar-nav ml-auto ml-md-0">
        <li class="nav-item dropdown no-arrow mx-1">
          <a class="nav-link dropdown-toggle" href="#" id="alertsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-bell fa-fw"></i>
            <span class="badge badge-danger">9+</span>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="alertsDropdown">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
        <li class="nav-item dropdown no-arrow mx-1">
          <a class="nav-link dropdown-toggle" href="#" id="messagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-envelope fa-fw"></i>
            <span class="badge badge-danger">7</span>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="messagesDropdown">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
        <li class="nav-item dropdown no-arrow">
          <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-user-circle fa-fw"></i>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
            <a class="dropdown-item" href="#">Settings</a>
            <a class="dropdown-item" href="#">Activity Log</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">Logout</a>
          </div>
        </li>
      </ul>
    </nav>

<div id="wrapper">

      <!-- Sidebar -->
      <ul class="sidebar navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="./">
            <i class="fas fa-fw fa-tachometer-alt"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./projects">
            <i class="fas fa-fw fa-chart-folder"></i>
            <span>Projects</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./experiments">
            <i class="fas fa-fw fa-chart-area"></i>
            <span>Experiments</span></a>
        </li>
      </ul>

      <div id="content-wrapper">

        <div class="container-fluid">

            {% for proj, projdetails in z.items() %}

         <!-- Breadcrumbs-->
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="./">Dashboard</a>
            </li>
            <li class="breadcrumb-item active">Project: {{projdetails.name}}</li>
          </ol>
                         <!-- Area Chart Example-->
          <div class="card mb-3">
            <div class="card-header">
              <i class="fas fa-chart-area"></i>
              {{projdetails.name}}</div>
          </div>
            {% endfor %}

        <div id="accordion">
          <div class="card">
            <div class="card-header" id="headingOne">
              <h5 class="mb-0">
                <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                  Tests To Be ran
                </button>
              </h5>
            </div>

            <div id="collapseOne" class="collapse hide" aria-labelledby="headingOne" data-parent="#accordion">
              <div class="card-body" >
                 <table id="tblt" data-click-to-select="true" data-show-toggle="true" data-show-columns="true" data-show-refresh="true" data-show-columns="true" data-query-params-type="" data-query-params="queryParam"
  data-show-footer="false" data-toggle="table" data-cache="false" class="table">

                <thead>
                  <tr>
                      <th data-field="testtimestamp" data-align="right" data-sortable="true">timestamp</th>
                      <th data-field="testinput" data-align="right" data-sortable="true">input</th>
                      <th data-field="timage" data-align="right" data-sortable="true">image</th>
                    </tr>
                  </thead>
                  <tbody>
                  {% for tdatakey, tdatadetails in t.items() %}
               <tr>
                    <td>{{ tdatadetails.testtimestamp }}</td>
                    <td><a href="./testimage?project={{id}}&timestamp={{tdatadetails.testtimestamp}}&testimage={{tdatadetails.testinput}}" target="_blank">{{ tdatadetails.testinput }}</a></td>
                   <td><a href="./testimage?project={{id}}&timestamp={{tdatadetails.testtimestamp}}&testimage={{tdatadetails.testinput}}" target="_blank"><img src="./testimage?project={{id}}&timestamp={{tdatadetails.testtimestamp}}&testimage={{tdatadetails.testinput}}" tyle="width:150px" ></a></td>
               </tr>
            {% endfor %}
                  </tbody>
                    </table>
              </div>
            </div>
          </div>
        </div>
                    <!-- DataTables Example -->
          <div class="card mb-3">
            <div class="card-header">
              <i class="fas fa-table">Experiments Ran</i>
              <a class="btn btn-info btn-lg" title="Download model file" style="float: right;" onclick="compareexperiments()">
        <span class="glyphicon glyphicon-download-alt" style="float: right;" ></span> Compare Experiments
</a>
            </div>

            <div class="card-body">
  <div id="filter-bar">
      <label id="lbltipAddedComment"></label>
  </div>
 <table id="tbl" data-click-to-select="true" data-toolbar="#filter-bar" data-show-toggle="true" data-show-columns="true" data-show-refresh="true" data-show-columns="true" data-query-params-type="" data-query-params="queryParam"
  data-show-footer="false" data-toggle="table" data-cache="false" class="table">

                <thead>
                  <tr>
                      <th><input type="checkbox" name="select_all" value="1" id="example-select-all"></th>
                    <th>Owner</th>
                    <th data-field="timestamp" data-align="right" data-sortable="true">Timestamp</th>
                    <th data-field="framework" data-align="right" data-sortable="true">Framework</th>
                    <th data-field="size" data-align="right" data-sortable="true">Size</th>
                    <th data-field="epochs" data-align="right" data-sortable="true">Epochs</th>
                    <th data-field="layerscount" data-align="right" data-sortable="true">Layers</th>
                    <th data-field="inputtensors" data-align="right" data-sortable="true">Input Tensors</th>
                    <th data-field="outputtensor" data-align="right" data-sortable="true">Output Tensors</th>
                    <th data-field="optimizer" data-align="right" data-sortable="true">Optimizer</th>
                    <th data-field="lossfunction" data-align="right" data-sortable="true">Loss Function</th>
                    <th data-field="accuracyvalue" data-align="right" data-sortable="true">Accuracy</th>
                    <th data-field="lossvalue" data-align="right" data-sortable="true">Loss</th>
                    </tr>
                  </thead>
                  <tbody>
                  {% for proj, projdetails in z.items() %}
           {% for ke,va in projdetails.history.items() %}
               <tr>
                    <td><input type="checkbox" name="select_all" value="1" class="testone"></td>
                    <td>{{ va.owner }}</td>
                    <td><a href="./viewexperiment?experiment={{ke}}&project={{va.project}}">{{ va.timestamptext }}</a></td>
                    <td>{{ va.framework }}</td>
                    <td>{{ va.batch_size }}</td>
                    <td>{{ va.epochs }}</td>
                    <td>{{ va.layers_count }}</td>
                    <td>{{ va.input_shape }}</td>
                    <td>{{ va.output_shape }}</td>
                    <td>{{ va.Optimizer }}</td>
                    <td>{{ va.LossFunction }}</td>
                    <td>{{ va.accuracy_value }}</td>
                    <td>{{ va.loss_value }}</td>
               </tr>
            {% endfor %}
              {% endfor %}
                  </tbody>
                </table>
        <!-- /.container-fluid -->

      </div>
          </div>
        </div>

         </div>
        <!-- Sticky Footer -->
        <footer class="sticky-footer">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright © Modelkb 2019</span>
            </div>
          </div>
        </footer>
</div>
</body>

  <script type="text/javascript">
    $(function() {
      $('#filter-bar').bootstrapTableFilter({
        filters: [{
          field: 'epochs',
          label: 'epochs',
          type: 'range'
        },
        {
          field: 'layerscount',
          label: 'layerscount',
          type: 'range'
        },
         {
          field: 'accuracyvalue',
          label: 'accuracyvalue',
          type: 'range'
        },
        {
          field: 'lossvalue',
          label: 'lossvalue',
          type: 'range'
        },
         {
          field: 'optimizer',
          label: 'optimizer',
          type: 'select',
          values: [{
            id: 'Adam',
            label: 'Adam'
          },
          {
            id: 'None',
            label: 'None'
          }]
        }],
          connectTo: '#tbl',
        onAll: function(name, args) {
          var d = new Date();
          $('#log').prepend(d.toLocaleString() + ': ' + name + args + "\n");
          var data = $('#filter-bar').bootstrapTableFilter('getData');
          dados = JSON.stringify(data);
        },
        onSubmit: function(data) {
          var data = $('#filter-bar').bootstrapTableFilter('getData');
          var d = new Date();
          $('#log').prepend(d.toLocaleString() + ': ' + JSON.stringify(data) + "\n");
          dados = JSON.stringify(data);

          document.getElementById('lbltipAddedComment').innerHTML = dados;

          if (dados == "{}") {
                document.getElementById('lbltipAddedComment').innerHTML = "";
            }

          console.log(dados);
          $('#tbl').bootstrapTable('refresh');
        }
      });
    });

function compareexperiments(){
$("#tbl tbody").each(function () {
var columnCount = $('#tbl tr td').length -1;
for(var i=0;i<columnCount;i++){
    if ($($(this).find("tr")[0]).find("td")[i].innerText != $($(this).find("tr")[1]).find("td")[i].innerText) {
        $($(this).find("tr")[1]).find("td")[i].bgColor = "#8ee4f1";
    }
    }
});
}
  </script>


</body>
</html>
